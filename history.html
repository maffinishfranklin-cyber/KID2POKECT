<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purchase History - KID2POCKET</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <h1>KID2POCKET</h1>
                <p>Kids Clothing (Ages 1-15)</p>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html">Dashboard</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="cart.html">Cart <span class="cart-badge" id="cartBadge">0</span></a></li>
                <li><a href="billing.html">Billing</a></li>
                <li><a href="history.html" class="active">History</a></li>
            </ul>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Purchase History</h2>
                </div>

                <!-- Filters -->
                <div class="history-filters">
                    <select id="filterPaymentMethod" class="form-control" onchange="filterHistory()">
                        <option value="">All Payment Methods</option>
                        <option value="online">Online Payment</option>
                        <option value="offline">Offline Payment</option>
                    </select>
                    <input type="date" id="filterStartDate" class="form-control" onchange="filterHistory()">
                    <input type="date" id="filterEndDate" class="form-control" onchange="filterHistory()">
                    <input type="text" id="searchHistory" class="form-control" placeholder="Search by invoice, customer name..." onkeyup="filterHistory()">
                    <button class="btn btn-secondary" onclick="clearFilters()">Clear Filters</button>
                </div>

                <!-- History List -->
                <div id="historyList">
                    <!-- Purchase history will be loaded here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Invoice Modal -->
    <div id="invoiceModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; overflow-y: auto;">
        <div class="modal-content" style="background: white; padding: 2rem; border-radius: 10px; max-width: 800px; width: 90%; margin: 2rem auto;">
            <div class="card-header">
                <h2>Invoice Details</h2>
                <button onclick="closeInvoiceModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
            </div>
            <div id="invoiceModalContent">
                <!-- Invoice content will be loaded here -->
            </div>
            <div style="margin-top: 2rem; text-align: center;">
                <button class="btn btn-primary" onclick="printInvoiceFromModal()">Print / Save as PDF</button>
                <button class="btn btn-secondary" onclick="closeInvoiceModal()">Close</button>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script src="js/history.js"></script>
    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('navMenu');
            if (hamburger) {
                hamburger.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                    hamburger.classList.toggle('active');
                });
            }
            updateCartBadge();
            loadHistory();
        });
    </script>
</body>
</html>

